(self.webpackChunktech_details=self.webpackChunktech_details||[]).push([[1255],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return d},kt:function(){return m}});var r=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=r.createContext({}),c=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,i=e.mdxType,n=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(a),m=i,f=u["".concat(s,".").concat(m)]||u[m]||p[m]||n;return a?r.createElement(f,o(o({ref:t},d),{},{components:a})):r.createElement(f,o({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=a.length,o=new Array(n);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<n;c++)o[c]=a[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},97545:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var r=a(22122),i=a(19756),n=(a(67294),a(3905)),o=["components"],l={hide_title:!0,sidebar_label:"Calibration Targets & Params"},s="Calibration Targets & Params",c={unversionedId:"research/calibration/calibration-target-params",id:"research/calibration/calibration-target-params",isDocsHomePage:!1,title:"Calibration Targets & Params",description:"In order for the calibration to run, we need to at least define the target's parameter, for example a april_5x5.yaml file.",source:"@site/docs/research/calibration/calibration-target-params.md",sourceDirName:"research/calibration",slug:"/research/calibration/calibration-target-params",permalink:"/tech-details/docs/research/calibration/calibration-target-params",version:"current",lastUpdatedAt:1626243292,formattedLastUpdatedAt:"7/14/2021",frontMatter:{hide_title:!0,sidebar_label:"Calibration Targets & Params"},sidebar:"researchSidebar",previous:{title:"Getting Started with Kalibr",permalink:"/tech-details/docs/research/calibration/getting-started"},next:{title:"Kalibr Result Conventions",permalink:"/tech-details/docs/research/calibration/kalibr-result-conventions"}},d=[{value:"Our Calibration Target",id:"our-calibration-target",children:[]},{value:"About <code>low_id</code>",id:"about-low_id",children:[{value:"The IMU Config File",id:"the-imu-config-file",children:[]}]}],p={toc:d};function u(e){var t=e.components,l=(0,i.Z)(e,o);return(0,n.kt)("wrapper",(0,r.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"calibration-targets--params"},"Calibration Targets & Params"),(0,n.kt)("p",null,"In order for the calibration to run, we need to at least define the target's parameter, for example a ",(0,n.kt)("inlineCode",{parentName:"p"},"april_5x5.yaml")," file."),(0,n.kt)("h2",{id:"our-calibration-target"},"Our Calibration Target"),(0,n.kt)("p",null,"It is strongly recommended to use Aprilgrid as the calibration target as"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"partially visible calibration boards can be used"),(0,n.kt)("li",{parentName:"ul"},"pose of the target is fully resolved (no flips)")),(0,n.kt)("p",null,"More details can be found on the Kalibr's ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/ethz-asl/kalibr/wiki/calibration-targets"},"wiki page"),", and a sample grid starting from detection id 0 is available ",(0,n.kt)("a",{parentName:"p",href:"https://drive.google.com/file/d/0B0T1sizOvRsUdjFJem9mQXdiMTQ/edit"},"here"),". "),(0,n.kt)("p",null,"Below is the current Aprilgrid calibration board we are using and its corresponding ",(0,n.kt)("inlineCode",{parentName:"p"},".yaml")," file."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"calibration_board",src:a(70584).Z})),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="april_5x5.yaml"',title:'"april_5x5.yaml"'},"  target_type: 'aprilgrid'      #gridtype\n  tagCols: 5                    #number of apriltags\n  tagRows: 5                    #number of apriltags\n  tagSize: 0.1500               #size of apriltag, edge to edge [m]\n  tagSpacing: 0.30001           #ratio of space between tags to tagSize, for our apriltag spacing = 0.029\n  low_id: 25                    #the lowest detection id within the grid, normally on the bottom-left\n")),(0,n.kt)("h2",{id:"about-low_id"},"About ",(0,n.kt)("inlineCode",{parentName:"h2"},"low_id")),(0,n.kt)("p",null,"Observe that the first grid (closest to the coordinate marker) in the board above has the same encoding as the 26-th grid in a typical ",(0,n.kt)("a",{parentName:"p",href:"https://drive.google.com/file/d/0B0T1sizOvRsUdjFJem9mQXdiMTQ/edit"},"board"),". This is because the board we are using is purpose-made to start from a different id other than the default zero. Therefore, the ",(0,n.kt)("inlineCode",{parentName:"p"},"low_id")," field is to be added in the yaml file to tell the calibration algorithm about this fact."),(0,n.kt)("p",null,"The stock Kalibr pacakges does not support defining the lowest id natively (it always assumes the id starts from 0), hence we have added the ",(0,n.kt)("inlineCode",{parentName:"p"},"low_id")," feature, refering to the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/chengguizi/kalibr/commit/8d1a7846ab3ad9d5475fa3b816c92b90da8f6eb8"},"commit"),"."),(0,n.kt)("h3",{id:"the-imu-config-file"},"The IMU Config File"),(0,n.kt)("p",null,"If camera-imu calibration is needed, then an additional IMU config file like below is needed."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="imu.yaml"',title:'"imu.yaml"'},"#Accelerometers\naccelerometer_noise_density: 1.86e-03   #Noise density (continuous-time)\naccelerometer_random_walk:   4.33e-04   #Bias random walk\n\n#Gyroscopes\ngyroscope_noise_density:     1.87e-04   #Noise density (continuous-time)\ngyroscope_random_walk:       2.66e-05   #Bias random walk\n\nrostopic:                    /mavros/imu/data     #the IMU ROS topic\nupdate_rate:                 360.0      #Hz (for discretization of the values above)\n")))}u.isMDXComponent=!0},70584:function(e,t,a){"use strict";t.Z=a.p+"assets/images/calibration_board-6affc1acb25521a54f1b2713f04af194.jpg"}}]);