(self.webpackChunktech_details=self.webpackChunktech_details||[]).push([[6081],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return p}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=u(n),p=i,h=m["".concat(s,".").concat(p)]||m[p]||c[p]||r;return n?a.createElement(h,l(l({ref:t},d),{},{components:n})):a.createElement(h,l({ref:t},d))}));function p(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var u=2;u<r;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},30647:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return d},default:function(){return m}});var a=n(22122),i=n(19756),r=(n(67294),n(3905)),l=["components"],o={hide_title:!0,sidebar_label:"Unity Setup"},s="Usage",u={unversionedId:"systems/unity-setup",id:"systems/unity-setup",isDocsHomePage:!1,title:"Usage",description:"Simulator",source:"@site/docs/systems/unity-setup.md",sourceDirName:"systems",slug:"/systems/unity-setup",permalink:"/tech-details/docs/systems/unity-setup",version:"current",lastUpdatedAt:1628955083,formattedLastUpdatedAt:"8/14/2021",frontMatter:{hide_title:!0,sidebar_label:"Unity Setup"},sidebar:"systemsSidebar",previous:{title:"Unity Simulator",permalink:"/tech-details/docs/systems/unity-simulator"},next:{title:"Build-your-own",permalink:"/tech-details/docs/systems/unity-buildyourown"}},d=[{value:"Simulator",id:"simulator",children:[{value:"Setup",id:"setup",children:[]},{value:"Build for Auto Fast Flt",id:"build-for-auto-fast-flt",children:[]},{value:"Build for Fisheye View Mavlink2",id:"build-for-fisheye-view-mavlink2",children:[]},{value:"Build for Auto Fast Flt Mavlink2",id:"build-for-auto-fast-flt-mavlink2",children:[]}]}],c={toc:d};function m(e){var t=e.components,n=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"usage"},"Usage"),(0,r.kt)("h2",{id:"simulator"},"Simulator"),(0,r.kt)("h3",{id:"setup"},"Setup"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Select the venue needed, download the correspoinding folder to local PC."),(0,r.kt)("li",{parentName:"ol"},"Go into the folder, you'll see a few executable files. The simulation requires you to run the ",(0,r.kt)("strong",{parentName:"li"},"Server")," file first, followed by the ",(0,r.kt)("strong",{parentName:"li"},"Client")," files sequentially."),(0,r.kt)("li",{parentName:"ol"},"Open the ",(0,r.kt)("strong",{parentName:"li"},"Server")," file, click ",(0,r.kt)("strong",{parentName:"li"},"Play!"),", select the map needed, click ",(0,r.kt)("strong",{parentName:"li"},"LAUNCH"),", you'll see the map loaded."),(0,r.kt)("li",{parentName:"ol"},"Go back to the folder, open the ",(0,r.kt)("strong",{parentName:"li"},"Client01")," file, click ",(0,r.kt)("strong",{parentName:"li"},"Play!"),", make sure the ",(0,r.kt)("strong",{parentName:"li"},"Sim Mode")," is at ",(0,r.kt)("strong",{parentName:"li"},"DebugOnlyReference")," (at the upper left corner). Change the ",(0,r.kt)("strong",{parentName:"li"},"REMOTE DATA IP ADDRESS")," to that of the drone you are gonna connect, if needed, then click ",(0,r.kt)("strong",{parentName:"li"},"CONNECT"),"."),(0,r.kt)("li",{parentName:"ol"},"Redo step 4 for ",(0,r.kt)("strong",{parentName:"li"},"Client02"),", ",(0,r.kt)("strong",{parentName:"li"},"Client03")," etc., if there is more than one client needed until all client files are opened."),(0,r.kt)("li",{parentName:"ol"},"After each simulation, make sure all the .exe files are closed. Re-open them by following ",(0,r.kt)("strong",{parentName:"li"},"step 1 to 5")," for another round of simulation.")),(0,r.kt)("hr",null),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("h3",{parentName:"div",id:"how-to-choose-which-client-to-connect-which-drone"},"How to choose which client to connect which drone"),(0,r.kt)("ol",{parentName:"div"},(0,r.kt)("li",{parentName:"ol"},"Open a TX2 terminal and run $ ",(0,r.kt)("inlineCode",{parentName:"li"},"echo $simulator_id")," which gives you a number that represents the first number of a client's UDP port."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"simulator_id")," is one bigger than the number in client's name. "),(0,r.kt)("li",{parentName:"ol"},"So, for example, if ",(0,r.kt)("inlineCode",{parentName:"li"},"simulator_id")," is 2, you should choose ",(0,r.kt)("inlineCode",{parentName:"li"},"client01"),".")))),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"For build your own unity scene and guide to modify please refer to ",(0,r.kt)("strong",{parentName:"p"},"(Build-your-own)")))),(0,r.kt)("h3",{id:"build-for-auto-fast-flt"},"Build for Auto Fast Flt"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The build folder is too large to upload to bitbucket. ",(0,r.kt)("strong",{parentName:"li"},"(Will be available soon)")),(0,r.kt)("li",{parentName:"ol"},"It has been uploaded to ")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"\\\\deptnas.nus.edu.sg\\TSL\\Research\\Centre Flight Science\\Intelligent Unmanned Systems\\Research Data Backup\\Users\\YONG Wen Huei Wayne\\Unity Simulator\\Auto Fast Flt_build-2020-mm-dd"'))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Start Server.exe. Select environment ",(0,r.kt)("strong",{parentName:"li"},'"Science Centre"')),(0,r.kt)("li",{parentName:"ol"},"For 5 degree downward tilt Lidar, use  ")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"\\\\deptnas.nus.edu.sg\\TSL\\Research\\Centre Flight Science\\Intelligent Unmanned Systems\\Research Data Backup\\Users\\YONG Wen Huei Wayne\\Unity Simulator\\Auto Fast Flt_5_deg_down_build-2020-mm-dd"'))),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"For 10 degree downward tilt Lidar, use  ")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"\\\\deptnas.nus.edu.sg\\TSL\\Research\\Centre Flight Science\\Intelligent Unmanned Systems\\Research Data Backup\\Users\\YONG Wen Huei Wayne\\Unity Simulator\\Auto Fast Flt_10_deg_down_build-2020-mm-dd"'))),(0,r.kt)("h3",{id:"build-for-fisheye-view-mavlink2"},"Build for Fisheye View Mavlink2"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The build folder is too large to upload to bitbucket."),(0,r.kt)("li",{parentName:"ol"},'It has been uploaded to "',"\\",'deptnas.nus.edu.sg\\TSL\\Research\\Centre Flight Science\\Intelligent Unmanned Systems\\Research Data Backup\\Users\\YONG Wen Huei Wayne\\Unity Simulator\\Fisheye_build-2020-mm-dd"'),(0,r.kt)("li",{parentName:"ol"},'Start Server.exe. Select environment "Science Centre"'),(0,r.kt)("li",{parentName:"ol"},'Start Client01.exe. Select Sim Mode "DebugOnlyReference"'),(0,r.kt)("li",{parentName:"ol"},"Launch nus_unity_socket"),(0,r.kt)("li",{parentName:"ol"},"The fisheye image topic is ",(0,r.kt)("inlineCode",{parentName:"li"},"/hil/sensor/stereo/right/image_raw")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"/hil/sensor/stereo/right/image_raw"))),(0,r.kt)("h3",{id:"build-for-auto-fast-flt-mavlink2"},"Build for Auto Fast Flt Mavlink2"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The build folder is too large to upload to bitbucket."),(0,r.kt)("li",{parentName:"ol"},'It has been uploaded to "',"\\",'deptnas.nus.edu.sg\\TSL\\Research\\Centre Flight Science\\Intelligent Unmanned Systems\\Research Data Backup\\Users\\YONG Wen Huei Wayne\\Unity Simulator\\Auto Fast Flt-mavlink2_build-2020-mm-dd"'),(0,r.kt)("li",{parentName:"ol"},'Start Server.exe. Select environment "Science Centre"'),(0,r.kt)("li",{parentName:"ol"},'Start Client01.exe. Select Sim Mode "Vision" if DJI simulation pose is used.'),(0,r.kt)("li",{parentName:"ol"},"Launch nus_unity_socket"),(0,r.kt)("li",{parentName:"ol"},"Publish DJI (ENU) pose to ",(0,r.kt)("inlineCode",{parentName:"li"},"/mavros/vision_pose/pose"))))}m.isMDXComponent=!0}}]);