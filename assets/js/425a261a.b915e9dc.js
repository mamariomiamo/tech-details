(self.webpackChunktech_details=self.webpackChunktech_details||[]).push([[8629],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return d},kt:function(){return m}});var r=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=r.createContext({}),c=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,i=e.mdxType,n=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(a),m=i,h=u["".concat(s,".").concat(m)]||u[m]||p[m]||n;return a?r.createElement(h,o(o({ref:t},d),{},{components:a})):r.createElement(h,o({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=a.length,o=new Array(n);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<n;c++)o[c]=a[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},60935:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var r=a(22122),i=a(19756),n=(a(67294),a(3905)),o=["components"],l={hide_title:!0,sidebar_label:"Getting Started with Kalibr"},s="Getting Started with Kalibr",c={unversionedId:"research/calibration/getting-started",id:"research/calibration/getting-started",isDocsHomePage:!1,title:"Getting Started with Kalibr",description:"Kalibr is a ROS Package that is capable of multi-camera calibration which consist of:",source:"@site/docs/research/calibration/getting-started.md",sourceDirName:"research/calibration",slug:"/research/calibration/getting-started",permalink:"/tech-details/docs/research/calibration/getting-started",version:"current",lastUpdatedAt:1628955083,formattedLastUpdatedAt:"8/14/2021",frontMatter:{hide_title:!0,sidebar_label:"Getting Started with Kalibr"},sidebar:"researchSidebar",previous:{title:"Flight Data Analysis",permalink:"/tech-details/docs/research/flight-data/flight-data-analysis"},next:{title:"Calibration Targets & Params",permalink:"/tech-details/docs/research/calibration/calibration-target-params"}},d=[{value:"Download and Build",id:"download-and-build",children:[]},{value:"Using Our Calibration Server",id:"using-our-calibration-server",children:[]},{value:"Knowledge Required for Camera Calibration Work",id:"knowledge-required-for-camera-calibration-work",children:[{value:"Reading Materials",id:"reading-materials",children:[]}]}],p={toc:d};function u(e){var t=e.components,l=(0,i.Z)(e,o);return(0,n.kt)("wrapper",(0,r.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"getting-started-with-kalibr"},"Getting Started with Kalibr"),(0,n.kt)("p",null,"Kalibr is a ROS Package that is capable of multi-camera calibration which consist of:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Intrinsic calibration")," of each individual cameras (camera model parameters)"),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Extrinsic calibration")," of the multiple cameras (spatial transformation)"),(0,n.kt)("li",{parentName:"ol"},"Optionally, the ",(0,n.kt)("strong",{parentName:"li"},"camera-imu extrinsic calibration"),", and time offset calibration. This function is tested to be not very accurate, so less used.")),(0,n.kt)("p",null,"More detailed documentation about the Kalibr package is available here ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/ethz-asl/kalibr/wiki"},"https://github.com/ethz-asl/kalibr/wiki"),"."),(0,n.kt)("h2",{id:"download-and-build"},"Download and Build"),(0,n.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"Do not download from ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/ethz-asl/kalibr"},"official repository"),"! This is because our calibration board is custom-made with different Apriltag (QR Code) IDs, the official code will not detect the corners correctly."))),(0,n.kt)("p",null,"Git Repository: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/chengguizi/kalibr"},"https://github.com/chengguizi/kalibr")," (default master branch)"),(0,n.kt)("p",null,"Kalibr is a ROS package, so it is to be cloned into the  ",(0,n.kt)("inlineCode",{parentName:"p"},"src/"),"  directory of the caktin workspace."),(0,n.kt)("p",null,"This version builds on top of the official repository, which:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"works with a calibration board with non-zero  ",(0,n.kt)("inlineCode",{parentName:"li"},"low_id")),(0,n.kt)("li",{parentName:"ul"},"works correctly with Double Sphere Camera Model")),(0,n.kt)("h1",{id:"installation-processs"},"Installation processs"),(0,n.kt)("p",null,"Ensure that ROS melodic and catkin are installed."),(0,n.kt)("p",null,"Install the build and run dependencies:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"sudo apt-get install python-setuptools python-rosinstall ipython libeigen3-dev libboost-all-dev doxygen libopencv-dev ros-melodic-vision-opencv ros-melodic-image-transport-plugins ros-melodic-cmake-modules python-software-properties software-properties-common libpoco-dev python-matplotlib python-scipy python-git python-pip ipython libtbb-dev libblas-dev liblapack-dev python-catkin-tools libv4l-dev \n\nsudo pip install python-igraph --upgrade\n")),(0,n.kt)("p",null,"Create a catkin workspace inside catkin folder"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"mkdir -p ~/kalibr_workspace/src    \ncd ~/kalibr_workspace    \nsource/opt/ros/melodic/setup.bash    \ncatkin init    \ncatkin config --extend /opt/ros/melodic    \ncatkin config --merge-devel # Necessary for catkin_tools >= 0.4. \ncatkin config --cmake-args -DCMAKE_BUILD_TYPE=Release\n")),(0,n.kt)("p",null,"Navigate to catkin's src folder, clone custom repo"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"cd ~/kalibr_workspace/src  \ngit clone https://github.com/chengguizi/kalibr.git\n")),(0,n.kt)("p",null,"Make kalibr"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"catkin make kalibr\n")),(0,n.kt)("p",null,"It takes a while to compile.\nInstall Sophus"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"sudo apt-get install ros-melodic-sophus\n")),(0,n.kt)("p",null,"Once the build is finished you have to source the catkin workspace setup to use Kalibr\nsource ~/kalibr_workspace/devel/setup.bash"),(0,n.kt)("p",null,"More on catkin build, refer  ",(0,n.kt)("a",{parentName:"p",href:"http://172.18.72.192:8888/tech-details/docs/linux/ros/using-catkin-build"},"here"),". To verify the installation, command  ",(0,n.kt)("inlineCode",{parentName:"p"},"kalibr_calibrate_cameras"),"  should exist."),(0,n.kt)("p",null,"More on catkin build, refer ",(0,n.kt)("a",{parentName:"p",href:"/tech-details/docs/linux/ros/using-catkin-build"},"here"),". To verify the installation, command ",(0,n.kt)("inlineCode",{parentName:"p"},"kalibr_calibrate_cameras")," should exist."),(0,n.kt)("p",null,"It is recommanded to use our calibration server instead."),(0,n.kt)("h2",{id:"using-our-calibration-server"},"Using Our Calibration Server"),(0,n.kt)("p",null,"However, we have a local server dedicated for calibration at "),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"IP address: ",(0,n.kt)("inlineCode",{parentName:"p"},"172.16.141.132")," (NUS network)")),(0,n.kt)("p",null,"For detailed calibration steps, please follow these ",(0,n.kt)("a",{parentName:"p",href:"/tech-details/docs/research/calibration/calibration-procedures"},"instructions"),"."),(0,n.kt)("h2",{id:"knowledge-required-for-camera-calibration-work"},"Knowledge Required for Camera Calibration Work"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Familiar with ",(0,n.kt)("strong",{parentName:"li"},"Rotation group $SO(3)$")," (special othorgnonal group in dimension 3) and its two common representations, including",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Rotation matrix $R$ (dimensions of $\\mathbb{R}^{3 \\times 3}$), and "),(0,n.kt)("li",{parentName:"ul"},"Quaternion $q$ (dimensions of $\\mathbb{R}^{4}$)"))),(0,n.kt)("li",{parentName:"ul"},"Faimiliar with ",(0,n.kt)("strong",{parentName:"li"},"special Euclidean group")," $SE(3)$ and its representation as",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Homogenous transformation matrix $T$ (dimensions of $\\mathbb{R}^{4 \\times 4}$)"))),(0,n.kt)("li",{parentName:"ul"},"Ability to express the rotation relationship between two coordinate frames, and be confortable with the notations like $T",(0,n.kt)("em",{parentName:"li"},"i^c$ or $T"),"{ic}$ or T_i_c (denotes camera in imu frame).")),(0,n.kt)("h3",{id:"reading-materials"},"Reading Materials"),(0,n.kt)("p",null,"Basics on rotations and rigid-body motions"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Lecture 8 - 10 from ",(0,n.kt)("a",{parentName:"li",href:"http://vision.stanford.edu/teaching/cs131_fall1415/schedule.html"},"http://vision.stanford.edu/teaching/cs131_fall1415/schedule.html")),(0,n.kt)("li",{parentName:"ul"},"Note on Camera Models ",(0,n.kt)("a",{parentName:"li",href:"https://web.stanford.edu/class/cs231a/course_notes/01-camera-models.pdf"},"https://web.stanford.edu/class/cs231a/course_notes/01-camera-models.pdf")),(0,n.kt)("li",{parentName:"ul"},"Modern Robotics video series, first three videos of chapter 3 ",(0,n.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=29LhXWjn7Pc&list=PLggLP4f-rq02vX0OQQ5vrCxbJrzamYDfx&index=10"},"YouTube")),(0,n.kt)("li",{parentName:"ul"},"An Invitation to 3-D Vision, the first three chapters")),(0,n.kt)("p",null,"More regarding quaternions:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{target:"_blank",href:a(89326).Z},"Standarised Use of Quaternions [PDF]"))))}u.isMDXComponent=!0},89326:function(e,t,a){"use strict";t.Z=a.p+"assets/files/standarised_use_of_quaternions-6abb7428d4eea592091ca62f26d28930.pdf"}}]);